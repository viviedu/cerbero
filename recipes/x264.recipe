# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python
from cerbero.tools.libtool import LibtoolLibrary


class Recipe(recipe.Recipe):
    name = 'x264'
    version = '157.2945'
    remotes = {'origin': 'https://gitlab.freedesktop.org/gstreamer/meson-ports/x264.git'}
    commit = 'fde1390d8891ca34d46b4c2c453cab3d15f45faa'
    licenses = [License.GPLv2Plus]
    btype = BuildType.MESON

    files_libs = ['libx264']
    files_bins = ['x264']
    files_devel = ['lib/pkgconfig/x264.pc', 'include/x264.h',
                   'include/x264_config.h']

    def post_install(self):
        libtool_la = LibtoolLibrary('x264', 157, None, None, self.config.libdir,
                self.config.target_platform)
        libtool_la.save()
        super().post_install()
